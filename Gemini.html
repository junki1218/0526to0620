<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css"> @import url(https://themes.googleusercontent.com/fonts/css?kit=kbffV7V9BIH3Ot2AQ2LQRA);</style></head><body class="doc-content" style="background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier&quot;;font-style:normal">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;ja&quot;&gt;<br>&lt;head&gt;<br> &nbsp; &nbsp;&lt;meta charset=&quot;UTF-8&quot;&gt;<br> &nbsp; &nbsp;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br> &nbsp; &nbsp;&lt;title&gt;&#26410;&#26469;&#12408;&#12398;&#19968;&#27497;&lt;/title&gt;<br> &nbsp; &nbsp;&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;<br> &nbsp; &nbsp;&lt;!-- Cute Font: Mochiy Pop P One --&gt;<br> &nbsp; &nbsp;&lt;link href=&quot;https://fonts.googleapis.com/css2?family=Mochiy+Pop+P+One&amp;family=Inter:wght@400;600&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;<br> &nbsp; &nbsp;&lt;style&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;body {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Inter&#39;, sans-serif;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #fce7f3; /* Light pink background for the body */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display: flex;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;justify-content: center;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;align-items: center;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;min-height: 100vh;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;padding: 1rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;box-sizing: border-box;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;transition: background-color 0.5s ease-in-out; /* Smooth transition for background color */<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.container {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #ffffff;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border-radius: 1.5rem; /* More rounded corners */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Soft shadow */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;padding: 2.5rem; /* Increased padding */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;max-width: 600px;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;width: 100%;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text-align: center;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display: flex;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flex-direction: column;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gap: 1.5rem; /* Space between elements */<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/* &#12520;&#12467;&#12473;&#12459; Header Styling */<br> &nbsp; &nbsp; &nbsp; &nbsp;#yokosuka-header {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;margin-bottom: 2rem;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.yokosuka-char {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Mochiy Pop P One&#39;, cursive; /* Apply cute font */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 3rem; /* Large and prominent */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-weight: bold;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display: inline-block; /* For animation */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;transition: transform 0.1s ease-out; /* Base transition */<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.shocking-pink-text {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #ff1493; /* A more specific &quot;shocking pink&quot; */<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.outlined-white-text {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/* Simulate white text with black outline for visibility on white background */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-webkit-text-stroke: 1.5px #000; /* For webkit browsers (Chrome, Safari) */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text-stroke: 1.5px #000; /* Standard property */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #ffffff; /* Actual white color */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/* Fallback/additional shadow for older browsers or subtle effect */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text-shadow: 1px 1px 0px rgba(0,0,0,0.5), -1px -1px 0px rgba(0,0,0,0.5), 1px -1px 0px rgba(0,0,0,0.5), -1px 1px 0px rgba(0,0,0,0.5);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/* Wave animation for &#12520;&#12467;&#12473;&#12459; */<br> &nbsp; &nbsp; &nbsp; &nbsp;@keyframes wave-bounce {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0%, 100% { transform: translateY(0) rotate(0deg); }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;25% { transform: translateY(-8px) rotate(-3deg); }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;75% { transform: translateY(8px) rotate(3deg); }<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.yokosuka-char.animate-wave {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;animation: wave-bounce 0.6s ease-out forwards; /* Run animation once */<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.yokosuka-char:nth-child(1).animate-wave { animation-delay: 0s; }<br> &nbsp; &nbsp; &nbsp; &nbsp;.yokosuka-char:nth-child(2).animate-wave { animation-delay: 0.1s; }<br> &nbsp; &nbsp; &nbsp; &nbsp;.yokosuka-char:nth-child(3).animate-wave { animation-delay: 0.2s; }<br> &nbsp; &nbsp; &nbsp; &nbsp;.yokosuka-char:nth-child(4).animate-wave { animation-delay: 0.3s; }<br><br><br> &nbsp; &nbsp; &nbsp; &nbsp;/* General Page Elements */<br> &nbsp; &nbsp; &nbsp; &nbsp;.title-page-content, .explanation-page-content {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display: flex;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flex-direction: column;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;align-items: center;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;justify-content: center;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;height: 100%;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gap: 2rem;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.page-title {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Mochiy Pop P One&#39;, cursive; /* Apply cute font */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 2.5rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-weight: 700;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #d12e62;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.page-text {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Inter&#39;, sans-serif; /* Keep Inter for readability here */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 1.3rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #4a5568;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;line-height: 1.6;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.question-text {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Inter&#39;, sans-serif; /* Keep Inter for readability here */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 1.75rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-weight: 600;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #2c3e50;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;margin-bottom: 1.5rem;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.options-grid {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display: grid;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;grid-template-columns: 1fr;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gap: 1rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;margin-bottom: 2rem;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;@media (min-width: 640px) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.options-grid {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;grid-template-columns: 1fr 1fr;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.option-button {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Inter&#39;, sans-serif; /* Keep Inter for readability here */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;padding: 1.25rem 1rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border-radius: 0.75rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border: 2px solid #fbcfe8; /* Lighter pink border */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #fce7f3; /* Lighter pink background */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #4a5568;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 1.1rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cursor: pointer;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;transition: all 0.2s ease-in-out;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text-align: center;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;word-break: keep-all;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.option-button:hover:not(.selected) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #f7adcc; /* Slightly darker pink hover */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border-color: #d12e62; /* Deeper pink border on hover */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;transform: translateY(-2px);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.option-button.selected {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #ec4899; /* Pink selected state */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: white;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border-color: #db2777;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;box-shadow: 0 4px 8px rgba(236, 72, 153, 0.3);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-weight: 600;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.action-button {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Inter&#39;, sans-serif; /* Keep Inter for readability here */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #ec4899; /* Pink button */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: white;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;padding: 1rem 2rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border-radius: 0.75rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 1.2rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-weight: 600;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cursor: pointer;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border: none;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;box-shadow: 0 4px 10px rgba(236, 72, 153, 0.4);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.action-button:hover:not(:disabled) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #db2777;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;transform: translateY(-2px);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.action-button:disabled {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #a0aec0;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cursor: not-allowed;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;box-shadow: none;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.loading-indicator {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display: none;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;margin-top: 1.5rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #ec4899;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 1.1rem;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.result-area {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background-color: #f8fafc;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border: 2px solid #e2e8f0;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border-radius: 0.75rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;padding: 1.5rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;margin-top: 2rem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text-align: left;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;white-space: pre-wrap; /* Preserve formatting */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;max-height: 400px;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;overflow-y: auto;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #2d3748;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-size: 1.1rem; /* Slightly larger font for results */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;line-height: 1.8; /* Increased line height for readability */<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-family: &#39;Mochiy Pop P One&#39;, cursive; /* Apply cute font to results */<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.result-area p {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;margin-bottom: 0.75rem;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.error-message {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;color: #e53e3e;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;font-weight: 600;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;margin-top: 1rem;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;.hidden {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display: none !important;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;/* Animation for typing effect */<br> &nbsp; &nbsp; &nbsp; &nbsp;.typing-char {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;opacity: 0;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;animation: appear 0.03s forwards; /* Controls speed of character reveal */<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;@keyframes appear {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;to { opacity: 1; }<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br> &nbsp; &nbsp;&lt;div class=&quot;container&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- &#12520;&#12467;&#12473;&#12459; Header --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;yokosuka-header&quot; class=&quot;text-center mb-6&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span class=&quot;yokosuka-char shocking-pink-text&quot;&gt;&#12520;&lt;/span&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span class=&quot;yokosuka-char outlined-white-text&quot;&gt;&#12467;&lt;/span&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span class=&quot;yokosuka-char shocking-pink-text&quot;&gt;&#12473;&lt;/span&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span class=&quot;yokosuka-char outlined-white-text&quot;&gt;&#12459;&lt;/span&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- Title Page --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;title-page&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;title-page-content&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;h1 class=&quot;page-title&quot;&gt;&#26410;&#26469;&#12408;&#12398;&#19968;&#27497;&lt;/h1&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button id=&quot;start-button&quot; class=&quot;action-button&quot;&gt;&#12473;&#12479;&#12540;&#12488;&lt;/button&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- Explanation Page --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;explanation-page&quot; class=&quot;hidden&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;explanation-page-content&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;h2 class=&quot;page-title&quot;&gt;&#12371;&#12398;&#12450;&#12503;&#12522;&#12395;&#12388;&#12356;&#12390;&lt;/h2&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p class=&quot;page-text&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#12354;&#12394;&#12383;&#12364;&#36984;&#12435;&#12384;&#36984;&#25246;&#32930;&#12391;&#12289;&#20170;&#12398;&#36020;&#26041;&#12395;&#24517;&#35201;&#12394;&#21161;&#35328;&#12392;&quot;&#21839;&#12356;&quot;&#12434;&#25237;&#12370;&#12363;&#12369;&#12390;&#12367;&#12428;&#12414;&#12377;&#12290;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#12354;&#12394;&#12383;&#12398;&#20869;&#38754;&#12392;&#21521;&#12365;&#21512;&#12356;&#12289;&#26032;&#12383;&#12394;&#19968;&#27497;&#12434;&#36367;&#12415;&#20986;&#12377;&#12365;&#12387;&#12363;&#12369;&#12434;&#35211;&#12388;&#12369;&#12414;&#12375;&#12423;&#12358;&#12290;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/p&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button id=&quot;proceed-to-questions-button&quot; class=&quot;action-button&quot;&gt;&#27425;&#12408;&lt;/button&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- Question Section --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;question-section&quot; class=&quot;hidden&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p id=&quot;question-text&quot; class=&quot;question-text&quot;&gt;&#36074;&#21839;&#12364;&#12371;&#12371;&#12395;&#34920;&#31034;&#12373;&#12428;&#12414;&#12377;&#12290;&lt;/p&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;options-container&quot; class=&quot;options-grid&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- &#12458;&#12503;&#12471;&#12519;&#12531;&#12508;&#12479;&#12531;&#12364;&#12371;&#12371;&#12395;&#21205;&#30340;&#12395;&#36861;&#21152;&#12373;&#12428;&#12414;&#12377; --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button id=&quot;next-button&quot; class=&quot;action-button&quot; disabled&gt;&#27425;&#12408;&lt;/button&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- Loading Indicator --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;loading-indicator&quot; class=&quot;loading-indicator&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;svg class=&quot;animate-spin h-6 w-6 mr-3 text-pink-500 inline-block&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; fill=&quot;none&quot; viewBox=&quot;0 0 24 24&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;circle class=&quot;opacity-25&quot; cx=&quot;12&quot; cy=&quot;12&quot; r=&quot;10&quot; stroke=&quot;currentColor&quot; stroke-width=&quot;4&quot;&gt;&lt;/circle&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;path class=&quot;opacity-75&quot; fill=&quot;currentColor&quot; d=&quot;M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z&quot;&gt;&lt;/path&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/svg&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Gemini&#12364;&#24605;&#32771;&#20013;...<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- Result Section --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;result-section&quot; class=&quot;result-area hidden&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;h2 class=&quot;text-2xl font-semibold text-gray-700 mb-4&quot;&gt;Gemini&#12363;&#12425;&#12398;&#12450;&#12489;&#12496;&#12452;&#12473;&lt;/h2&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;gemini-response&quot;&gt;&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button id=&quot;restart-button&quot; class=&quot;action-button mt-4&quot;&gt;&#12418;&#12358;&#19968;&#24230;&#35430;&#12377;&#65281;&lt;/button&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- Error Message --&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id=&quot;error-message&quot; class=&quot;error-message hidden&quot;&gt;&lt;/div&gt;<br> &nbsp; &nbsp;&lt;/div&gt;<br><br> &nbsp; &nbsp;&lt;script type=&quot;module&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;import { initializeApp } from &quot;https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js&quot;;<br> &nbsp; &nbsp; &nbsp; &nbsp;import { getAuth, signInAnonymously, signInWithCustomToken } from &quot;https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js&quot;;<br> &nbsp; &nbsp; &nbsp; &nbsp;import { getFirestore } from &quot;https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js&quot;;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;// Global variables provided by the Canvas environment<br> &nbsp; &nbsp; &nbsp; &nbsp;const appId = typeof __app_id !== &#39;undefined&#39; ? __app_id : &#39;default-app-id&#39;;<br> &nbsp; &nbsp; &nbsp; &nbsp;const firebaseConfig = typeof __firebase_config !== &#39;undefined&#39; ? JSON.parse(__firebase_config) : {};<br> &nbsp; &nbsp; &nbsp; &nbsp;const initialAuthToken = typeof __initial_auth_token !== &#39;undefined&#39; ? __initial_auth_token : null;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;let app;<br> &nbsp; &nbsp; &nbsp; &nbsp;let auth;<br> &nbsp; &nbsp; &nbsp; &nbsp;let db;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;const questions = [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text: &quot;&#20170;&#12289;&#27442;&#12375;&#12356;&#12418;&#12398;&#12399;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;options: [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#38477;&#12426;&#27880;&#12368;&#20104;&#31639;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#12452;&#12531;&#12463;&#12523;&#12540;&#12471;&#12502;&#12394;&#29872;&#22659;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;24&#26178;&#38291;&#20351;&#12360;&#12427;&#22259;&#26360;&#39208;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#12510;&#12452;&#12473;&#12492;&#12540;&#12474;&#12524;&#12531;&#12523;&#12540;&#12512;&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text: &quot;&#20170;&#12398;&#27671;&#20998;&#12399;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;options: [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#12495;&#12483;&#12500;&#12540;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#12525;&#12531;&#12522;&#12540;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#35542;&#29702;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#28966;&#12426;&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text: &quot;&#19968;&#27497;&#36367;&#12415;&#20986;&#12377;&#12383;&#12417;&#12395;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;options: [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#26397;&#12300;&#12362;&#12399;&#12424;&#12358;&#12372;&#12374;&#12356;&#12414;&#12353;&#12377;&#12301;&#12392;&#20803;&#27671;&#12394;&#25384;&#25334;&#12434;&#12377;&#12427;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#12499;&#12540;&#12523;/&#26085;&#26412;&#37202;&#12434;&#39154;&#12416;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;AI&#12434;&#27963;&#29992;&#12377;&#12427;&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&#20210;&#38291;&#12395;LINE&#12375;&#12424;&#12387;&#12363;&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;];<br><br> &nbsp; &nbsp; &nbsp; &nbsp;const skillTypes = [&quot;&#24605;&#32771;&#21147;&quot;, &quot;&#21028;&#26029;&#21147;&quot;, &quot;&#34920;&#29694;&#21147;&quot;];<br><br> &nbsp; &nbsp; &nbsp; &nbsp;let currentQuestionIndex = 0;<br> &nbsp; &nbsp; &nbsp; &nbsp;const userAnswers = [];<br> &nbsp; &nbsp; &nbsp; &nbsp;let selectedOption = null;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;// Page elements<br> &nbsp; &nbsp; &nbsp; &nbsp;const titlePage = document.getElementById(&#39;title-page&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const explanationPage = document.getElementById(&#39;explanation-page&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const questionSection = document.getElementById(&#39;question-section&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const startButton = document.getElementById(&#39;start-button&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const proceedToQuestionsButton = document.getElementById(&#39;proceed-to-questions-button&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const yokosukaChars = document.querySelectorAll(&#39;.yokosuka-char&#39;);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;// Question elements<br> &nbsp; &nbsp; &nbsp; &nbsp;const questionTextElement = document.getElementById(&#39;question-text&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const optionsContainer = document.getElementById(&#39;options-container&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const nextButton = document.getElementById(&#39;next-button&#39;);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;// Result and loading elements<br> &nbsp; &nbsp; &nbsp; &nbsp;const loadingIndicator = document.getElementById(&#39;loading-indicator&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const resultSection = document.getElementById(&#39;result-section&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const geminiResponseElement = document.getElementById(&#39;gemini-response&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const errorMessageElement = document.getElementById(&#39;error-message&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp;const restartButton = document.getElementById(&#39;restart-button&#39;);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/**<br> &nbsp; &nbsp; &nbsp; &nbsp; * Initializes Firebase and authenticates the user.<br> &nbsp; &nbsp; &nbsp; &nbsp; */<br> &nbsp; &nbsp; &nbsp; &nbsp;async function initializeFirebase() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;try {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (Object.keys(firebaseConfig).length &gt; 0) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;app = initializeApp(firebaseConfig);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;auth = getAuth(app);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;db = getFirestore(app);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (initialAuthToken) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;await signInWithCustomToken(auth, initialAuthToken);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;console.log(&quot;Signed in with custom token.&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;await signInAnonymously(auth);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;console.log(&quot;Signed in anonymously.&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;console.log(&quot;Firebase config not available. Skipping Firebase initialization.&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;auth = {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;currentUser: { uid: crypto.randomUUID() }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} catch (error) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;console.error(&quot;Error initializing Firebase or signing in:&quot;, error);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;displayError(&quot;Firebase&#12398;&#21021;&#26399;&#21270;&#12414;&#12383;&#12399;&#35469;&#35388;&#12395;&#22833;&#25943;&#12375;&#12414;&#12375;&#12383;&#12290;&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/**<br> &nbsp; &nbsp; &nbsp; &nbsp; * Shows a specific page and hides others.<br> &nbsp; &nbsp; &nbsp; &nbsp; * @param {HTMLElement} pageToShow - The page element to display.<br> &nbsp; &nbsp; &nbsp; &nbsp; */<br> &nbsp; &nbsp; &nbsp; &nbsp;function showPage(pageToShow) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Hide all main sections<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;titlePage.classList.add(&#39;hidden&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;explanationPage.classList.add(&#39;hidden&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;questionSection.classList.add(&#39;hidden&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;loadingIndicator.style.display = &#39;none&#39;;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;resultSection.classList.add(&#39;hidden&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorMessageElement.classList.add(&#39;hidden&#39;);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Show the requested page<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pageToShow.classList.remove(&#39;hidden&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Special handling for loading indicator which uses flex<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (pageToShow === loadingIndicator) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pageToShow.style.display = &#39;flex&#39;;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/**<br> &nbsp; &nbsp; &nbsp; &nbsp; * Displays the current question and its options.<br> &nbsp; &nbsp; &nbsp; &nbsp; */<br> &nbsp; &nbsp; &nbsp; &nbsp;function displayQuestion() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (currentQuestionIndex &lt; questions.length) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showPage(questionSection);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const question = questions[currentQuestionIndex];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;questionTextElement.textContent = question.text;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;optionsContainer.innerHTML = &#39;&#39;;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;selectedOption = null;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nextButton.disabled = true;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;question.options.forEach((option) =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const button = document.createElement(&#39;button&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;button.textContent = option;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;button.classList.add(&#39;option-button&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;button.setAttribute(&#39;data-value&#39;, option);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;button.addEventListener(&#39;click&#39;, () =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Array.from(optionsContainer.children).forEach(btn =&gt; btn.classList.remove(&#39;selected&#39;));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;button.classList.add(&#39;selected&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;selectedOption = option;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nextButton.disabled = false;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;optionsContainer.appendChild(button);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;generateAndCallGemini();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/**<br> &nbsp; &nbsp; &nbsp; &nbsp; * Triggers the wave animation on the &#12520;&#12467;&#12473;&#12459; characters.<br> &nbsp; &nbsp; &nbsp; &nbsp; */<br> &nbsp; &nbsp; &nbsp; &nbsp;function triggerYokosukaWave() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yokosukaChars.forEach((char) =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;char.classList.remove(&#39;animate-wave&#39;); // Remove to reset animation<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Trigger reflow to restart the animation<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;void char.offsetWidth;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;char.classList.add(&#39;animate-wave&#39;); // Add to start animation<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;// Event Listeners for page navigation<br> &nbsp; &nbsp; &nbsp; &nbsp;startButton.addEventListener(&#39;click&#39;, () =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showPage(explanationPage);<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;proceedToQuestionsButton.addEventListener(&#39;click&#39;, () =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;displayQuestion();<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;nextButton.addEventListener(&#39;click&#39;, () =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (selectedOption) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;userAnswers.push(selectedOption);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;currentQuestionIndex++;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;triggerYokosukaWave(); // Trigger animation on next button click<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;displayQuestion();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;restartButton.addEventListener(&#39;click&#39;, () =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;currentQuestionIndex = 0;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;userAnswers.length = 0; // Clear previous answers<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;selectedOption = null;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;geminiResponseElement.innerHTML = &#39;&#39;; // Clear previous response<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showPage(titlePage); // Go back to the title page<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/**<br> &nbsp; &nbsp; &nbsp; &nbsp; * Animates the display of text with a typing effect.<br> &nbsp; &nbsp; &nbsp; &nbsp; * @param {string} text - The text to animate.<br> &nbsp; &nbsp; &nbsp; &nbsp; * @param {HTMLElement} element - The DOM element to append text to.<br> &nbsp; &nbsp; &nbsp; &nbsp; * @param {number} delay - Delay in milliseconds per character.<br> &nbsp; &nbsp; &nbsp; &nbsp; */<br> &nbsp; &nbsp; &nbsp; &nbsp;function animateTextTyping(text, element, delay = 30) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;element.innerHTML = &#39;&#39;; // Clear content before animation<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;let i = 0;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const paragraphs = text.split(&#39;\n&#39;).filter(p =&gt; p.trim() !== &#39;&#39;); // Split by new line and remove empty paragraphs<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;function typeParagraph(pIndex) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (pIndex &gt;= paragraphs.length) return; // All paragraphs typed<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const currentParagraphText = paragraphs[pIndex];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const currentParaElement = document.createElement(&#39;p&#39;); // Create a new p tag for each paragraph<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;element.appendChild(currentParaElement);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;let charIndex = 0;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;function typeChar() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (charIndex &lt; currentParagraphText.length) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const span = document.createElement(&#39;span&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;span.textContent = currentParagraphText.charAt(charIndex);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;span.classList.add(&#39;typing-char&#39;); // Apply animation class<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;currentParaElement.appendChild(span);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;charIndex++;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setTimeout(typeChar, delay);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Move to the next paragraph after a slight delay<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setTimeout(() =&gt; typeParagraph(pIndex + 1), delay * 5); // A bit longer delay between paragraphs<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;typeChar(); // Start typing the current paragraph<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;typeParagraph(0); // Start typing from the first paragraph<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/**<br> &nbsp; &nbsp; &nbsp; &nbsp; * Constructs the prompt, calls the Gemini API, and displays the result.<br> &nbsp; &nbsp; &nbsp; &nbsp; */<br> &nbsp; &nbsp; &nbsp; &nbsp;async function generateAndCallGemini() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showPage(loadingIndicator);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const randomSkill = skillTypes[Math.floor(Math.random() * skillTypes.length)];<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const promptFormat = `<br>&#12518;&#12540;&#12470;&#12540;&#12398;&#22238;&#31572;&#12399;&#20197;&#19979;&#12398;&#36890;&#12426;&#12384;&#12424;&#12290;<br>&#36074;&#21839;1&#12398;&#31572;&#12360;: ${userAnswers[0]}<br>&#36074;&#21839;2&#12398;&#31572;&#12360;: ${userAnswers[1]}<br>&#36074;&#21839;3&#12398;&#31572;&#12360;: ${userAnswers[2]}<br><br>&#12371;&#12428;&#12425;&#12398;&#22238;&#31572;&#12392;&#12289;&#20197;&#19979;&#12398;&#35201;&#32032;&#65288;&#12521;&#12531;&#12480;&#12512;&#12395;&#36984;&#12400;&#12428;&#12383;&#12473;&#12461;&#12523;&#12479;&#12452;&#12503;: ${randomSkill}&#65289;&#12395;&#22522;&#12389;&#12356;&#12390;&#12289;&#20197;&#19979;&#12398;JSON&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12391;&#36820;&#20449;&#12375;&#12390;&#12397;&#12290;&#21451;&#36948;&#12395;&#35441;&#12377;&#12424;&#12358;&#12395;&#12289;&#12479;&#12513;&#21475;&#12391;&#12289;&#32117;&#25991;&#23383;&#12434;&#12383;&#12367;&#12373;&#12435;&#20351;&#12387;&#12390;&#12289;&#12509;&#12472;&#12486;&#12451;&#12502;&#12394;&#38640;&#22258;&#27671;&#12391;&#12414;&#12392;&#12417;&#12390;&#12397;&#12290;<br><br>{<br> &nbsp; &nbsp;&quot;greetingAndPraiseText&quot;: &quot;&#12518;&#12540;&#12470;&#12540;&#12408;&#12398;&#25384;&#25334;&#12392;&#12289;&#12402;&#12383;&#12377;&#12425;&#35090;&#12417;&#12427;&#25991;&#31456;&#12290;300&#23383;&#12367;&#12425;&#12356;&#12391;&#12289;&#21451;&#36948;&#12395;&#35441;&#12377;&#12424;&#12358;&#12395;&#12290;&#32117;&#25991;&#23383;&#12434;&#12383;&#12367;&#12373;&#12435;&#20837;&#12428;&#12390;&#12289;&#36229;&#12509;&#12472;&#12486;&#12451;&#12502;&#12394;&#24863;&#12376;&#12391;&#65281;&quot;,<br> &nbsp; &nbsp;&quot;genreAdviceText&quot;: &quot;&#12518;&#12540;&#12470;&#12540;&#12398;&#36984;&#25246;&#12363;&#12425;&#32771;&#12360;&#12427;&#12289;&#20170;&#20027;&#20307;&#30340;&#12434;&#12289;&#25345;&#12388;&#12409;&#12365;&#12472;&#12515;&#12531;&#12523;&#12392;&#12289;&#12381;&#12428;&#12395;&#38306;&#36899;&#12377;&#12427;&#30693;&#35672;&#12420;&#25216;&#33021;&#12289;&#12381;&#12375;&#12390;&#12473;&#12461;&#12523;&#12479;&#12452;&#12503;&#65288;${randomSkill}&#65289;&#12434;&#39640;&#12417;&#12427;&#26041;&#27861;&#12395;&#12388;&#12356;&#12390;&#12290;&#12479;&#12513;&#21475;&#12391;&#12289;&#32117;&#25991;&#23383;&#12434;&#36969;&#24230;&#12395;&#28151;&#12380;&#12390;&#12397;&#12290;&#20363;&#12399;&#35352;&#36617;&#12375;&#12414;&#12379;&#12435;&#12290;&#19978;&#35352;&#12473;&#12461;&#12523;&#12479;&#12452;&#12503;&#12434;&#20351;&#12387;&#12390;&#29983;&#25104;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;&quot;,<br> &nbsp; &nbsp;&quot;theQuestionText&quot;: &quot;&#12518;&#12540;&#12470;&#12540;&#12408;&#12398;\&quot;&#21839;&#12356;\&quot;&#12290;&#31777;&#28500;&#12395;&#12290;&#12479;&#12513;&#21475;&#12391;&#12290;&#20363;&#12399;&#35352;&#36617;&#12375;&#12414;&#12379;&#12435;&#12290;&quot;,<br> &nbsp; &nbsp;&quot;finalEncouragementText&quot;: &quot;&#12518;&#12540;&#12470;&#12540;&#12434;&#12417;&#12385;&#12419;&#12367;&#12385;&#12419;&#21169;&#12414;&#12377;&#30701;&#12356;&#25991;&#31456;&#12290;&#32117;&#25991;&#23383;&#12418;&#20837;&#12428;&#12390;&#12397;&#12290;&#12479;&#12513;&#21475;&#12391;&#12290;&quot;,<br> &nbsp; &nbsp;&quot;kurihamaMessageText&quot;: &quot;&#20037;&#37324;&#27996;&#12391;&#12398;&#26085;&#12293;&#12364;&#12518;&#12540;&#12470;&#12540;&#12398;&#12393;&#12398;&#33021;&#21147;&#12395;&#12394;&#12387;&#12390;&#12356;&#12427;&#12363;&#12434;&#35090;&#12417;&#12427;&#25991;&#31456;&#12290;&#32117;&#25991;&#23383;&#20837;&#12426;&#12391;&#65281;&#12479;&#12513;&#21475;&#12391;&#12290;&quot;<br>}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;let chatHistory = [];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;chatHistory.push({ role: &quot;user&quot;, parts: [{ text: promptFormat }] });<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const payload = {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;contents: chatHistory,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;generationConfig: {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;responseMimeType: &quot;application/json&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;responseSchema: {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;type: &quot;OBJECT&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;properties: {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;greetingAndPraiseText&quot;: { &quot;type&quot;: &quot;STRING&quot; },<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;genreAdviceText&quot;: { &quot;type&quot;: &quot;STRING&quot; },<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;theQuestionText&quot;: { &quot;type&quot;: &quot;STRING&quot; },<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;finalEncouragementText&quot;: { &quot;type&quot;: &quot;STRING&quot; },<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;kurihamaMessageText&quot;: { &quot;type&quot;: &quot;STRING&quot; }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;propertyOrdering&quot;: [&quot;greetingAndPraiseText&quot;, &quot;genreAdviceText&quot;, &quot;theQuestionText&quot;, &quot;finalEncouragementText&quot;, &quot;kurihamaMessageText&quot;]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;temperature&quot;: 1.0<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const apiKey = &quot;&quot;;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;try {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const response = await fetch(apiUrl, {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;method: &#39;POST&#39;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;headers: { &#39;Content-Type&#39;: &#39;application/json&#39; },<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;body: JSON.stringify(payload)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (!response.ok) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const errorData = await response.json();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;throw new Error(`API error: ${response.status} ${response.statusText} - ${JSON.stringify(errorData)}`);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const result = await response.json();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;console.log(&quot;Gemini API raw response:&quot;, result);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (result.candidates &amp;&amp; result.candidates.length &gt; 0 &amp;&amp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;result.candidates[0].content &amp;&amp; result.candidates[0].content.parts &amp;&amp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;result.candidates[0].content.parts.length &gt; 0) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const rawJsonText = result.candidates[0].content.parts[0].text;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const parsedJson = JSON.parse(rawJsonText);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Combine all parts into a single string for animation<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const fullResponseText = `<br>${parsedJson.greetingAndPraiseText}<br><br>${parsedJson.genreAdviceText}<br>&#12373;&#12390;&#12289;&#12381;&#12435;&#12394;&#12354;&#12394;&#12383;&#12395;&#12289;&#12371;&#12435;&#12394;&quot;&#21839;&#12356;&quot;&#12434;&#25237;&#12370;&#12363;&#12369;&#12383;&#12356;&hellip;&hellip;${parsedJson.theQuestionText}<br><br>${parsedJson.finalEncouragementText}<br><br>${parsedJson.kurihamaMessageText}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showPage(resultSection); // Show the result section before animation<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;animateTextTyping(fullResponseText, geminiResponseElement); // Animate the text<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} else {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;displayError(&quot;Gemini&#12363;&#12425;&#12398;&#24540;&#31572;&#12364;&#26399;&#24453;&#12373;&#12428;&#12383;&#24418;&#24335;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12391;&#12375;&#12383;&#12290;&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} catch (error) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;console.error(&quot;Error calling Gemini API or parsing response:&quot;, error);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;displayError(&quot;Gemini API&#12398;&#21628;&#12403;&#20986;&#12375;&#20013;&#12395;&#12456;&#12521;&#12540;&#12364;&#30330;&#29983;&#12375;&#12414;&#12375;&#12383;&#12290;&#26178;&#38291;&#12434;&#32622;&#12356;&#12390;&#20877;&#35430;&#34892;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;&#35443;&#32048;: &quot; + error.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} finally {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;loadingIndicator.style.display = &#39;none&#39;;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;/**<br> &nbsp; &nbsp; &nbsp; &nbsp; * Displays an error message to the user.<br> &nbsp; &nbsp; &nbsp; &nbsp; * @param {string} message - The error message to display.<br> &nbsp; &nbsp; &nbsp; &nbsp; */<br> &nbsp; &nbsp; &nbsp; &nbsp;function displayError(message) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorMessageElement.textContent = `&#12456;&#12521;&#12540;: ${message}`;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorMessageElement.classList.remove(&#39;hidden&#39;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;loadingIndicator.style.display = &#39;none&#39;;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showPage(errorMessageElement);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;// Initialize Firebase and display the title page<br> &nbsp; &nbsp; &nbsp; &nbsp;window.onload = async () =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;await initializeFirebase();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showPage(titlePage);<br> &nbsp; &nbsp; &nbsp; &nbsp;};<br> &nbsp; &nbsp;&lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></span></p></body></html>